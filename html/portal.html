<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Event Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/portal.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="#home" class="logo">üèõÔ∏è Community Portal</a>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#events">Events</a></li>
                <li><a href="#register">Register</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
            <button class="mobile-menu-btn">‚ò∞</button>
        </div>
    </nav>

    <!-- Header Section -->
    <header id="home">
        <div id="welcomeBanner">
            <div class="welcome-content">
                <h1 class="main-title">Welcome to Community Portal</h1>
                <p class="subtitle">Discover amazing local events and connect with your community</p>
                <span class="highlight">üéâ Special Offer: Early Bird Registration!</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Events Section -->
        <section id="events">
            <div class="container">
                <h2 class="section-title">Upcoming Events</h2>
                
                <!-- Filter Controls -->
                <div class="filter-controls">
                    <input type="text" id="searchInput" class="filter-input" placeholder="üîç Search events..." onkeydown="handleQuickSearch(event)">
                    <select id="categoryFilter" class="filter-input" onchange="filterByCategory()">
                        <option value="">All Categories</option>
                        <option value="music">Music</option>
                        <option value="workshop">Workshop</option>
                        <option value="sports">Sports</option>
                        <option value="community">Community</option>
                    </select>
                    <select id="locationFilter" class="filter-input" onchange="filterByLocation()">
                        <option value="">All Locations</option>
                        <option value="downtown">Downtown</option>
                        <option value="park">Community Park</option>
                        <option value="center">Community Center</option>
                    </select>
                </div>

                <!-- Loading Spinner -->
                <div class="loading-spinner" id="loadingSpinner"></div>

                <!-- Events Grid -->
                <div class="events-grid" id="eventsContainer">
                    <!-- Events will be populated by JavaScript -->
                </div>

                <!-- Image Gallery Table -->
                <div class="gallery-section">
                    <h3>Past Events Gallery</h3>
                    <table class="gallery-table">
                        <caption>Community Event Memories</caption>
                        <tr>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%236366f1'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Music Festival</text></svg>" alt="Music Festival" title="Summer Music Festival" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%238b5cf6'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Workshop</text></svg>" alt="Cooking Workshop" title="Community Cooking Workshop" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%2310b981'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Sports Day</text></svg>" alt="Sports Day" title="Annual Sports Day" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                        </tr>
                        <tr>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%23f59e0b'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Art Show</text></svg>" alt="Art Exhibition" title="Local Art Exhibition" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%23ef4444'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Food Fair</text></svg>" alt="Food Fair" title="Community Food Fair" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                            <td><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='150' viewBox='0 0 200 150'><rect width='200' height='150' fill='%2306b6d4'/><text x='100' y='75' text-anchor='middle' dy='.35em' fill='white' font-size='16'>Tech Meetup</text></svg>" alt="Tech Meetup" title="Monthly Tech Meetup" class="gallery-img" ondblclick="enlargeImage(this)"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- Registration Section -->
        <section id="register">
            <div class="container">
                <h2 class="section-title">Event Registration</h2>
                
                <!-- Registration Form -->
                <form class="registration-form" id="registrationForm" onsubmit="handleFormSubmit(event)">
                    <div class="success-message" id="successMessage"></div>
                    
                    <div class="form-group">
                        <label for="userName" class="form-label">Full Name *</label>
                        <input type="text" id="userName" name="userName" class="form-input" placeholder="Enter your full name" required autofocus onblur="validateName()">
                        <div class="error-message" id="nameError"></div>
                    </div>

                    <div class="form-group">
                        <label for="userEmail" class="form-label">Email Address *</label>
                        <input type="email" id="userEmail" name="userEmail" class="form-input" placeholder="Enter your email" required onblur="validateEmail()">
                        <div class="error-message" id="emailError"></div>
                    </div>

                    <div class="form-group">
                        <label for="userPhone" class="form-label">Phone Number</label>
                        <input type="tel" id="userPhone" name="userPhone" class="form-input" placeholder="Enter your phone number" onblur="validatePhone()">
                        <div class="error-message" id="phoneError"></div>
                    </div>

                    <div class="form-group">
                        <label for="eventDate" class="form-label">Preferred Event Date</label>
                        <input type="date" id="eventDate" name="eventDate" class="form-input">
                    </div>

                    <div class="form-group">
                        <label for="eventType" class="form-label">Event Type *</label>
                        <select id="eventType" name="eventType" class="form-input" required onchange="showEventFee()">
                            <option value="">Select an event type</option>
                            <option value="music">Music Events</option>
                            <option value="workshop">Workshops</option>
                            <option value="sports">Sports Events</option>
                            <option value="community">Community Events</option>
                        </select>
                        <div id="eventFee" class="event-fee"></div>
                    </div>

                    <div class="form-group">
                        <label for="feedback" class="form-label">Message/Feedback</label>
                        <textarea id="feedback" name="feedback" class="form-input" placeholder="Tell us about your interests or any special requirements..." onkeyup="countCharacters()"></textarea>
                        <div class="char-counter" id="charCounter">0 characters</div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="register-btn" onclick="confirmRegistration()">
                            üé´ Register for Event
                        </button>
                    </div>

                    <output id="formOutput" class="form-output"></output>
                </form>
            </div>
        </section>

        <!-- Geolocation Section -->
        <section class="geo-section">
            <div class="container">
                <h3>Find Nearby Events</h3>
                <p>Discover events happening near your location</p>
                <button class="geo-btn" onclick="findNearbyEvents()">üìç Find Nearby Events</button>
                <div class="geo-result" id="geoResult"></div>
            </div>
        </section>

        <!-- News Section with Multi-column Layout -->
        <section class="news-section">
            <div class="container">
                <h2 class="section-title">Community News</h2>
                <div class="news-content">
                    <p>Welcome to our vibrant community portal where residents can stay connected with local happenings. Our city council is committed to fostering community engagement through various events and activities.</p>
                    
                    <p>Recent community initiatives include the launch of our new recycling program, the opening of the renovated community center, and the establishment of weekly farmers markets in downtown areas.</p>
                    
                    <p>We encourage all residents to participate in upcoming town halls, volunteer opportunities, and seasonal celebrations. Your involvement makes our community stronger and more connected.</p>
                    
                    <p>Stay tuned for announcements about summer concert series, youth sports leagues, senior citizen programs, and adult education classes. Together, we're building a better community for everyone.</p>
                </div>
            </div>
        </section>

        <!-- Video Section -->
        <section class="video-section">
            <div class="container">
                <h2 class="section-title">Community Highlights</h2>
                <div class="video-container">
                    <video controls width="100%" oncanplay="showVideoReady()" onbeforeunload="warnBeforeLeave()">
                        <source src="data:video/mp4;base64," type="video/mp4">
                        <p>Your browser doesn't support video playback.</p>
                    </video>
                    <div id="videoStatus" class="video-status"></div>
                </div>
            </div>
        </section>

        <!-- Preferences Section -->
        <section class="preferences-section">
            <div class="container">
                <h3>Your Preferences</h3>
                <div class="preference-controls">
                    <button class="pref-btn" onclick="savePreferences()">üíæ Save Preferences</button>
                    <button class="pref-btn secondary" onclick="loadPreferences()">üìÇ Load Preferences</button>
                    <button class="pref-btn danger" onclick="clearPreferences()">üóëÔ∏è Clear Preferences</button>
                </div>
                <div id="preferenceStatus" class="preference-status"></div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="contact">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Contact Information</h4>
                    <p>üìß info@communityportal.gov</p>
                    <p>üìû (555) 123-4567</p>
                    <p>üìç 123 Main St, City Hall</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#events">Events</a></li>
                        <li><a href="help.html" target="_blank">Help Guide</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <p>Stay connected with community updates</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Community Event Portal. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Modal for Enlarged Images -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <img id="modalImage" src="" alt="">
        </div>
    </div>

    <script src="../js/portal.js"></script>
</body>
</html>